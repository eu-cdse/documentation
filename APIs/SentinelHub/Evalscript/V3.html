<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Documentation - Evalscript V3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../APIs/SentinelHub/Evalscript/Functions.html" rel="next">
<link href="../../../APIs/SentinelHub/Evalscript.html" rel="prev">
<link href="../../../_images/logos/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="zd-site-verification" content="xj9koofr1crilmoclgxsjd">
<script type="text/javascript">

    window.onload = () => {
        const elems = document.getElementsByClassName('navbar-title');
        if (elems.length > 0) {
            const title = elems[0];
            title.parentElement.href = '/Home.html'
        }
    }
</script>


<script type="text/javascript">
function scrollFunction() {
    var prevScrollpos = window.pageYOffset;
    if (prevScrollpos > 50) {
      document.getElementsByClassName("navbar-brand")[1].style.display = "none";
    } else {
      document.getElementsByClassName("navbar-brand")[1].style.display = "initial";
     
    }
  }
  
  window.addEventListener('scroll', scrollFunction);
</script>


<script>
function togglecheck(className, displayState){
  var elements = document.getElementsByClassName(className)
  for (var i = 0; i < elements.length; i++){
  if (elements[i].style.display === "none") {
    elements[i].style.display = "block";
  } else {
    elements[i].style.display = "none";
  }
  }
}
window.onload = function() {
      // Modify this array to contain the levelids of checkboxes that should be unchecked by default
      var uncheckedByDefault = ["Level-0"];
  
      for (var i = 0; i < uncheckedByDefault.length; i++) {
          togglecheck(uncheckedByDefault[i], "none");
      }
  };
</script>

<script>
  function handleQuestionClick(questionId) {
      // Update the hash in the URL
      window.location.hash = questionId + (window.innerHeight / 18);
      
      // Scroll to the target element and adjust its position
      scrollToQuestion(questionId);
  }

  function scrollToQuestion(questionId) {
      // Get the element with the ID specified in the hash
      var targetElement = document.querySelector(questionId);

      // Scroll to the target element and adjust its position
      if (targetElement) {
          // Calculate the position of the target element relative to the viewport
          var rect = targetElement.getBoundingClientRect();
          var offsetTop = rect.top + window.scrollY;
          var targetPosition = offsetTop - (window.innerHeight / 18);

          // Scroll to the adjusted position
          window.scrollTo({
              top: targetPosition,
              behavior: 'smooth'
          });

          // Open the details element
          targetElement.open = true;
      }
  }

  document.addEventListener("DOMContentLoaded", function() {
      // Check if there is a hash in the URL
      if (window.location.hash) {
          // Scroll to the target element and adjust its position after a short delay
          setTimeout(function() {
              scrollToQuestion(window.location.hash);
          }, 100);
      }
  });
</script>


<link rel="stylesheet" href="../../../custom.css">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://dataspace.copernicus.eu/" class="navbar-brand navbar-brand-logo">
    <img src="../../../_images/logos/combinedLogo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://dataspace.copernicus.eu/">
    <span class="navbar-title">Documentation</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../APIs.html">APIs</a></li><li class="breadcrumb-item"><a href="../../../APIs/SentinelHub.html">Sentinel Hub</a></li><li class="breadcrumb-item"><a href="../../../APIs/SentinelHub/Evalscript.html">Evalscript (custom script)</a></li><li class="breadcrumb-item"><a href="../../../APIs/SentinelHub/Evalscript/V3.html">Evalscript V3</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Home.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../Roadmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Service description and evolution roadmap</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Roadmap/DataTable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Roadmap/APITable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">APIs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Roadmap/AppTable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applications</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Registration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User registration and authentication</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/Others/Dashboard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Operations Dashboard</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Copernicus Sentinel Mission</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/SentinelMissions/Sentinel1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/SentinelMissions/Sentinel2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/SentinelMissions/Sentinel3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/SentinelMissions/Sentinel5P.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-5P</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/SentinelMissions/Sentinel6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-6</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Complementary data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/SMOS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Soil Moisture and Ocean Salinity (SMOS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/MERIS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ENVISAT- Medium Resolution Imaging Spectrometer (MERIS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/Landsat5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Landsat-5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/Landsat7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Landsat-7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/Landsat8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Landsat-8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/CLMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Land Monitoring Service (CLMS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/CMEMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Marine Service (CMEMS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/CEMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Emergency Management Service (CEMS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/CAMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Atmosphere Monitoring Service (CAMS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Data/ComplementaryData/Additional.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Complementary Data</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">APIs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/Token.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Access Token</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/OData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OData</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/OpenSearch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OpenSearch</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/openEO/openEO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">openEO</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/Glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/Collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Collections</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/Processes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">openEO Processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/File_formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">File Formats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/Python_Client/Python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Python client</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/R_Client/R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using R client</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/JavaScript_Client/JavaScript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using JavaScript client</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/job_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Job configuration</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Jupyter notebooks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/NDVI_Timeseries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zonal statistics over time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/Load_Collection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Load Sentinel-2 data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/UDF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User defined functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/UDP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publishing workflow as a service</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/openeo-community-examples/python/BasicSentinelMerge/sentinel_merge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preprocessing &amp; merging Sentinels</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/openEO/openeo-community-examples/python/RankComposites/rank_composites.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rank Composites</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/Whittaker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Smoothening dataset using Whittaker</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/openeo/NO2Covid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NO2 emission due to COVID lockdown effect</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/STAC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">STAC product catalogue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/S3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">S3 Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/Traceability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Traceability API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/On-Demand Production API.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">On-Demand Production API</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel Hub</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">User guides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/UserGuides/Datamask.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Mask</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/UserGuides/Transparency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transparency</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/UserGuides/TimeSeries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/UserGuides/Metadata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working with metadata in evalscript</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S1GRD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-1 GRD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S2L1C.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-2 L1C</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S2L2A.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-2 L2A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S3OLCI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-3 OLCI L1B</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S3SLSTR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-3 SLSTR L1B</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/S5PL2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel-5P L2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/DEM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Digital Elevation Model (DEM) Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/Byoc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bring Your Own COG / Batch</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/Zarr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zarr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Data/DataFusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Fusion</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Evalscript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Evalscript (custom script)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Evalscript/V3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Evalscript V3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Evalscript/Functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Utility Functions</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">API Overview</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Overview/Authentication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authentication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Overview/RateLimiting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rate limiting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Overview/ProcessingUnit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing Unit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Overview/ErrorHandling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Error Handling</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Process API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Crs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CRS support</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S1GRD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S1GRD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S2L1C.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S2L1C</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S2L2A.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S2L2A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S3OLCI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S3OLCI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S3SLSTR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S3SLSTR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/S5PL2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for S5PL2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/DEM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for DEM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Process/Examples/DataFusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for DataFusion</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/AsyncProcess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Asynchronous Processing API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/AsyncProcess/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for Asynchronous Processing API</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Catalog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Catalog API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Catalog/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for Catalog API</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Batch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Batch Processing API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Batch/Crs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CRS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Batch/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples of Batch Processing Workflow</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Statistical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-18" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Statistical/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for Statistical API</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/BatchStatistical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Batch Statistical API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-19" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/BatchStatistical/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples of Batch Statistical Workflow</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Byoc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bring Your Own COG API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-20" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Byoc/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BYOC API examples</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/Zarr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zarr Import API</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-21" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/Zarr/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zarr Import API examples</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../APIs/SentinelHub/OGC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OGC</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-22" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/WMS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WMS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/WCS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WCS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/WFS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WFS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/WMTS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WMTS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/AdditionalRequestParameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Request Parameters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/OutputFormats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Output Formats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/OGC/Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples for OGC</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/SentinelHub/ApiReference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">API Reference</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false">
 <span class="menu-text">Jupyter notebooks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-23" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/sentinelhub/migration_from_scihub_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Migration from SciHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/sentinelhub/data_download_process_request.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentinel Hub Process API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/sentinelhub/ice_monitoring.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification of Ice and Open Water</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebook-samples/sentinelhub/air_pollution_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Measuring NO2 concentrations</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../Applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applications</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-24" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/Browser.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the Browser</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/DataWorkspace.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About Data Workspace</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/AlgorithmPlaza.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">openEO Algorithm Plaza</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/WebEditor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">openEO Web Editor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/JupyterHub.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JupyterLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/QGIS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">QGIS Plugin</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Applications/DataSpaceDashboard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copernicus Data Space Ecosystem Dashboard</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Quotas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quotas and Limitations</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../FAQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false">
 <span class="menu-text">Catalog APIs news</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-25" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/Others/UpcomingChanges.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Upcoming changes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../APIs/Others/ReleaseNotes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Release notes</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setup-function" id="toc-setup-function" class="nav-link active" data-scroll-target="#setup-function">setup function</a>
  <ul>
  <li><a href="#specifics" id="toc-specifics" class="nav-link" data-scroll-target="#specifics">Specifics</a>
  <ul class="collapse">
  <li><a href="#input-object-properties" id="toc-input-object-properties" class="nav-link" data-scroll-target="#input-object-properties">Input object properties</a></li>
  <li><a href="#output-object-properties" id="toc-output-object-properties" class="nav-link" data-scroll-target="#output-object-properties">Output object properties</a></li>
  <li><a href="#mosaicking" id="toc-mosaicking" class="nav-link" data-scroll-target="#mosaicking">Mosaicking</a></li>
  <li><a href="#sampletype" id="toc-sampletype" class="nav-link" data-scroll-target="#sampletype">SampleType</a></li>
  </ul></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul></li>
  <li><a href="#evaluatepixel-function" id="toc-evaluatepixel-function" class="nav-link" data-scroll-target="#evaluatepixel-function">evaluatePixel function</a>
  <ul>
  <li><a href="#parameters" id="toc-parameters" class="nav-link" data-scroll-target="#parameters">Parameters</a>
  <ul class="collapse">
  <li><a href="#samples" id="toc-samples" class="nav-link" data-scroll-target="#samples">samples</a></li>
  <li><a href="#scenes" id="toc-scenes" class="nav-link" data-scroll-target="#scenes">scenes</a></li>
  <li><a href="#inputmetadata" id="toc-inputmetadata" class="nav-link" data-scroll-target="#inputmetadata">inputMetadata</a></li>
  <li><a href="#customdata" id="toc-customdata" class="nav-link" data-scroll-target="#customdata">customData</a></li>
  <li><a href="#outputmetadata" id="toc-outputmetadata" class="nav-link" data-scroll-target="#outputmetadata">outputMetadata</a></li>
  </ul></li>
  <li><a href="#returns" id="toc-returns" class="nav-link" data-scroll-target="#returns">Returns</a>
  <ul class="collapse">
  <li><a href="#input-units-and-output-values" id="toc-input-units-and-output-values" class="nav-link" data-scroll-target="#input-units-and-output-values">Input Units and Output Values</a></li>
  </ul></li>
  <li><a href="#examples-1" id="toc-examples-1" class="nav-link" data-scroll-target="#examples-1">Examples</a></li>
  </ul></li>
  <li><a href="#updateoutput-function-optional" id="toc-updateoutput-function-optional" class="nav-link" data-scroll-target="#updateoutput-function-optional">updateOutput function (optional)</a>
  <ul>
  <li><a href="#parameters-1" id="toc-parameters-1" class="nav-link" data-scroll-target="#parameters-1">Parameters</a></li>
  <li><a href="#returns-1" id="toc-returns-1" class="nav-link" data-scroll-target="#returns-1">Returns</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  </ul></li>
  <li><a href="#updateoutputmetadata-function-optional" id="toc-updateoutputmetadata-function-optional" class="nav-link" data-scroll-target="#updateoutputmetadata-function-optional">updateOutputMetadata function (optional)</a>
  <ul>
  <li><a href="#parameters-2" id="toc-parameters-2" class="nav-link" data-scroll-target="#parameters-2">Parameters</a></li>
  </ul></li>
  <li><a href="#preprocessscenes-function-optional" id="toc-preprocessscenes-function-optional" class="nav-link" data-scroll-target="#preprocessscenes-function-optional">preProcessScenes function (optional)</a>
  <ul>
  <li><a href="#parameters-3" id="toc-parameters-3" class="nav-link" data-scroll-target="#parameters-3">Parameters</a>
  <ul class="collapse">
  <li><a href="#collections" id="toc-collections" class="nav-link" data-scroll-target="#collections">collections</a></li>
  </ul></li>
  <li><a href="#returns-2" id="toc-returns-2" class="nav-link" data-scroll-target="#returns-2">Returns</a></li>
  <li><a href="#examples-2" id="toc-examples-2" class="nav-link" data-scroll-target="#examples-2">Examples</a>
  <ul class="collapse">
  <li><a href="#filter-scenes-by-particular-days" id="toc-filter-scenes-by-particular-days" class="nav-link" data-scroll-target="#filter-scenes-by-particular-days">Filter scenes by particular days</a></li>
  <li><a href="#filter-scenes-by-time-interval" id="toc-filter-scenes-by-time-interval" class="nav-link" data-scroll-target="#filter-scenes-by-time-interval">Filter scenes by time interval</a></li>
  <li><a href="#specify-the-number-of-months-taken-into-account" id="toc-specify-the-number-of-months-taken-into-account" class="nav-link" data-scroll-target="#specify-the-number-of-months-taken-into-account">Specify the number of months taken into account</a></li>
  <li><a href="#select-one-image-per-month" id="toc-select-one-image-per-month" class="nav-link" data-scroll-target="#select-one-image-per-month">Select one image per month</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#ogc-services-specifics" id="toc-ogc-services-specifics" class="nav-link" data-scroll-target="#ogc-services-specifics">OGC services specifics</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Evalscript V3</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Start your evalscript with <code>//VERSION=3</code> so the system will interpret it as such.</p>
<p>For evalscript V3 you need to specify two functions (described in detail below):</p>
<ul>
<li><code>setup</code> - where you specify inputs and outputs.</li>
<li><code>evaluatePixel</code> - which calculates the output values for each pixel.</li>
</ul>
<p>This is an example of a simple V3 evalscript which returns a true color image:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">//VERSION=3</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">input</span><span class="op">:</span> [<span class="st">"B02"</span><span class="op">,</span> <span class="st">"B03"</span><span class="op">,</span> <span class="st">"B04"</span>]<span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">output</span><span class="op">:</span> { <span class="dt">bands</span><span class="op">:</span> <span class="dv">3</span> }</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(sample) {</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [<span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B04</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B03</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B02</span>]<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="setup-function" class="level2">
<h2 class="anchored" data-anchor-id="setup-function">setup function</h2>
<p>This function is required as it sets up the input and output settings.</p>
<section id="specifics" class="level3">
<h3 class="anchored" data-anchor-id="specifics">Specifics</h3>
<p>Setup needs to return a javascript <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a> with the following properties:</p>
<ul>
<li><code>input</code> - an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">array</a> of <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">strings</a> representing band names or an array of <a href="#input-object-properties">input objects</a>.</li>
<li><code>output</code> - a single <a href="#output-object-properties">output</a> object or an array of <a href="#output-object-properties">output objects</a>.</li>
<li><code>mosaicking</code> (optional) - <!-- TODO: someone please make this nicer --> defines input sample preparation, see <a href="#mosaicking">mosaicking</a>. Defaults to <code>SIMPLE</code>.</li>
</ul>
<section id="input-object-properties" class="level4">
<h4 class="anchored" data-anchor-id="input-object-properties">Input object properties</h4>
<ul>
<li><code>bands</code> - an array of strings representing band names</li>
<li><code>units</code> (optional) - a string (all bands will use this unit) or an array of strings listing the units of each band. For a description of units see the documentation of the collection you are querying. Defaults to the default units for each band.</li>
<li><code>metadata</code> (optional) - an array of strings representing properties which can be added to the metadata. Options:
<ul>
<li><code>"bounds"</code> - specifying this will add <code>dataGeomtery</code> and <code>dataEnvelope</code> to tiles</li>
</ul></li>
</ul>
</section>
<section id="output-object-properties" class="level4">
<h4 class="anchored" data-anchor-id="output-object-properties">Output object properties</h4>
<ul>
<li><code>id</code> (optional) - any string of your choosing. Must be unique if multiple output objects are defined. Defaults to <code>default</code>.</li>
<li><code>bands</code> - the number of bands in this output.</li>
<li><code>sampleType</code> (optional) - sets the <a href="#sampletype">SampleType</a> constant defining the returned raster sample type. Defaults to <code>AUTO</code>.</li>
<li><code>nodataValue</code> (optional) - sets the GDAL nodata metadata tag to the specified value. Only applicable for tiff files.</li>
</ul>
<p>Note that the number of bands represent the number of components in the output image. JPEG and PNG, for example, can only support 1 or 3 color components (plus an alpha channel for PNG, if set). The sampleType also needs to be compatible with the output raster format.</p>
</section>
<section id="mosaicking" class="level4">
<h4 class="anchored" data-anchor-id="mosaicking">Mosaicking</h4>
<p>Mosaicking defines how the source data is mosaicked. Not all collections support all these mosaicking types as it depends on how the source data is distributed. See the collection information pages to determine which ones are supported. It is a constant which is specified by a string. To use, for example, set: <code>mosaicking: "SIMPLE"</code>.</p>
<ul>
<li><code>SIMPLE</code> (default) - the simplest method, it flattens the mosaicked image so only a single sample is passed to evaluation. <!-- TODO: missing a link to our internal mosaicking algorithm description--></li>
<li><code>ORBIT</code> - the mosaicked image is flattened for each orbit so that there is only one sample per pixel per orbit. Multiple samples can therefore be present if there is more than one orbit for the selected time range at the pixel location.</li>
<li><code>TILE</code> - this is essentially the unflattened mosaic. It contains all data available for the selected time range. Multiple samples can be present as each sample comes from a single scene. What a scene is is defined by the datasource. <!-- TODO: please add an example for what a scene is, or better yet, define SCENE somewhere and link there whenever it is mentioned --></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>ORBIT mosaicking currently does not work exactly as described but generates a single scene for each day containing satellite data. For most requests this should not be an issue, however high latitude regions may have more than one acquisition per day. For these consider using TILE mosaicking if getting all available data is paramount. This will be corrected in future releases.</p>
</div>
</div>
</section>
<section id="sampletype" class="level4">
<h4 class="anchored" data-anchor-id="sampletype">SampleType</h4>
<p>SampleType defines the sample type of the output raster. This needs to be compatible with the raster format (e.g.&nbsp;JPEG cannot be <code>FLOAT32</code>). It is a constant which is specified by a string. To use, for example, set: <code>sampleType: "AUTO"</code>.</p>
<ul>
<li><code>INT8</code> - signed 8-bit integer (values should range from -128 to 127)</li>
<li><code>UINT8</code> - unsigned 8-bit integer (values should range from 0 to 255)</li>
<li><code>INT16</code> - signed 16-bit integer (values should range from -32768 to
<ol start="32767" type="1">
<li></li>
</ol></li>
<li><code>UINT16</code> - unsigned 16-bit integer (values should range from 0 to
<ol start="65535" type="1">
<li></li>
</ol></li>
<li><code>FLOAT32</code> - 32-bit floating point (values have effectively no limits)</li>
<li><code>AUTO</code> (default) - values should range from 0-1, which will then automatically be stretched from the interval [0, 1] to [0, 255] and written into an UINT8 raster. Values below 0 and above 1 will be clamped to 0 and 255, respectively. This is the default if sampleType is not set in the <a href="#output-object-properties">output object</a>.</li>
</ul>
<p><strong>Handling SampleType in an Evalscript</strong></p>
<p>It is the responsibility of the evalscript to return the values in the interval expected for the chosen <code>sampleType</code>. For integer SampleTypes, any floating point values will be rounded to the nearest integer and clamped to the value range of the SampleType. There is no need to do this yourself. For example, in case of <code>UINT8</code> output, a value of 40.6 will be saved as 41, and a value of 310 will be saved as 255. If no sampleType is specified, AUTO is selected and the evalscript should return values ranging from 0-1. This is convenient as handling reflectance (e.g.&nbsp;Sentinel-2) data can be more intuitive.</p>
</section>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<p>This simple Sentinel-2 <code>setup()</code> function gets bands B02, B03, B04 and returns (UINT16) 16 bit unsigned raster values.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">input</span><span class="op">:</span> [{</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bands</span><span class="op">:</span> [<span class="st">"B02"</span><span class="op">,</span> <span class="st">"B03"</span><span class="op">,</span> <span class="st">"B04"</span>]<span class="op">,</span> <span class="co">// this sets which bands to use</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">units</span><span class="op">:</span> <span class="st">"DN"</span> <span class="co">// here we optionally set the units. All bands will be in this unit (in this case Digital numbers)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">output</span><span class="op">:</span> { <span class="co">// this defines the output image type</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bands</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="co">// the output of this evalscript will have RGB colors</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">sampleType</span><span class="op">:</span> <span class="st">"UINT16"</span> <span class="co">// raster format will be UINT16</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This Sentinel-2 <code>setup()</code> function gets bands B02, B03, B04 and returns a single raster with 8-bit integer values. To return values in the correct interval for the UINT8 sampleType, the <code>evaluatePixel()</code> function multiplies the reflectance values by 255. A true color image is returned.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">input</span><span class="op">:</span> [{</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bands</span><span class="op">:</span> [<span class="st">"B02"</span><span class="op">,</span> <span class="st">"B03"</span><span class="op">,</span> <span class="st">"B04"</span>]<span class="op">,</span> <span class="co">// this sets which bands to use</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">output</span><span class="op">:</span> {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bands</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">sampleType</span><span class="op">:</span> <span class="st">"UINT8"</span> <span class="co">// raster format will be UINT8</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(sample) {</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [sample<span class="op">.</span><span class="at">B04</span> <span class="op">*</span> <span class="dv">255</span><span class="op">,</span> sample<span class="op">.</span><span class="at">B03</span> <span class="op">*</span> <span class="dv">255</span><span class="op">,</span> sample<span class="op">.</span><span class="at">B02</span> <span class="op">*</span> <span class="dv">255</span>]<span class="op">;</span> <span class="co">// bands need to be multiplied by 255</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In case of UINT16, the multiplication factor in <code>evaluatePixel()</code> would be 65535 instead of 255.</p>
<p>The following example uses bands with different units and produces two rasters:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>      <span class="dt">input</span><span class="op">:</span> [{</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>          <span class="dt">bands</span><span class="op">:</span> [<span class="st">"B02"</span><span class="op">,</span> <span class="st">"B03"</span><span class="op">,</span> <span class="st">"B04"</span><span class="op">,</span> <span class="st">"B08"</span>]<span class="op">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>          <span class="dt">units</span><span class="op">:</span> [<span class="st">"reflectance"</span><span class="op">,</span> <span class="st">"reflectance"</span><span class="op">,</span> <span class="st">"reflectance"</span><span class="op">,</span> <span class="st">"DN"</span>] <span class="co">// B08 will be in digital numbers, the rest reflectance</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      }]<span class="op">,</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">output</span><span class="op">:</span> [{ <span class="co">// this is now an array since there are multiple output objects</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>          <span class="dt">id</span><span class="op">:</span> <span class="st">"rgb"</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>          <span class="dt">bands</span><span class="op">:</span> <span class="dv">3</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span> {</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>          <span class="dt">id</span><span class="op">:</span> <span class="st">"falseColor"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>          <span class="dt">bands</span><span class="op">:</span> <span class="dv">3</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      }]</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="evaluatepixel-function" class="level2">
<h2 class="anchored" data-anchor-id="evaluatepixel-function">evaluatePixel function</h2>
<p>The evaluatePixel function is a mapping which maps the input bands in their input units to the values in the output raster(s). The function is executed once for each output pixel.</p>
<section id="parameters" class="level3">
<h3 class="anchored" data-anchor-id="parameters">Parameters</h3>
<p>The evaluatePixel function has five positional parameters:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(samples<span class="op">,</span> scenes<span class="op">,</span> inputMetadata<span class="op">,</span> customData<span class="op">,</span> outputMetadata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first two parameters can be objects or arrays depending on requested <a href="#mosaicking">mosaicking</a> as explained below. They are additionally changed for data fusion requests, which is documented separately <a href="../../../APIs/SentinelHub/Data/DataFusion.html">here</a>. The remaining parameters are always objects.</p>
<section id="samples" class="level4">
<h4 class="anchored" data-anchor-id="samples">samples</h4>
<ul>
<li>When mosaicking is <code>SIMPLE</code>:
<ul>
<li><code>samples</code> - an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">object</a> containing the band values of the single mosaicked sample, in the specified units, as its <a href="https://developer.mozilla.org/docs/Web/JavaScript/Guide/Working_with_Objects#Objects_and_properties" target="_blank">properties</a>. The property names equal the names of all the <a href="#input-object-properties">input bands</a>, pixel values of a band can be accessed as e.g.&nbsp;<code>samples.B02</code>.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When using mosaicking <code>SIMPLE</code> we usually call this parameter <code>sample</code> in our examples to emphasize that it is an object and not an array.</p>
</div>
</div>
<ul>
<li>When mosaicking is <code>TILE</code> or <code>ORBIT</code>:
<ul>
<li><code>samples</code> - an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">array</a> of samples as defined in the <code>SIMPLE</code> case. None<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, one or multiple samples can therefore be present depending on how many orbits/tiles there are for the selected time range and area of interest. Pixel values of a band can be accessed for each sample as an item of the array, e.g.&nbsp;<code>samples[0].B02</code>.</li>
</ul></li>
</ul>
</section>
<section id="scenes" class="level4">
<h4 class="anchored" data-anchor-id="scenes">scenes</h4>
<ul>
<li><p>When mosaicking is <code>SIMPLE</code>:</p>
<ul>
<li><code>scenes</code> object is empty.</li>
</ul></li>
<li><p>When mosaicking is <code>ORBIT</code>:</p>
<ul>
<li><code>scenes</code> - an object containing a property <code>orbits</code>. <code>scenes.orbits</code> is an array of objects, where each of them contains metadata for one orbit (day). The length of <code>scenes.orbits</code> array is always the same as the length of <code>samples</code> array. A property, for example <code>dateFrom</code>, can be accessed as <code>scenes.orbits[0].dateFrom</code>. Each object's properties include:
<ul>
<li><code>dateFrom</code> (string) - ISO date and time in "YYYY-MM-DDTHH:MM:SSZ" format. Together with <code>orbits.dateTo</code> it represents the time interval of one day. All tiles acquired on this day are mosaicked into this scene.</li>
<li><code>dateTo</code> (string) - ISO date and time in "YYYY-MM-DDTHH:MM:SSZ" format. Together with <code>orbits.dateFrom</code> it represents the time interval of one day. All tiles acquired on this day are mosaicked into this scene.</li>
<li><code>tiles</code> (array) - an array of metadata for each tile used for mosaicking of this orbit. Each element has the same properties as elements of <code>scenes.tiles</code> (listed just below for mosaicking <code>TILE</code>).</li>
</ul></li>
</ul></li>
<li><p>When mosaicking is <code>TILE</code>:</p>
<ul>
<li><code>scenes</code> - an object containing a property <code>tiles</code>. <code>scenes.tiles</code> is an array of objects, where each of them contains metadata for one tile. The length of <code>scenes.tiles</code> array is always the same as the length of <code>samples</code> array. A property, for example <code>cloudCoverage</code>, can be accessed as <code>scenes.tiles[0].cloudCoverage</code>. Which properties are available for each <code>tiles</code> element depends on requested data and is documented in the "Scenes Object" chapter for each data collection, e.g. <a href="../../../APIs/SentinelHub/Data/S2L1C.html#scenes-object">here</a> for Sentinel-2 L1C. All possible properties are:
<ul>
<li><code>date</code> (string) - ISO date and time in "YYYY-MM-DDTHH:MM:SSZ" format. It represents a date when the tile was acquired.</li>
<li><code>cloudCoverage</code> (number) - Estimated percentage of pixels covered by clouds in the tile. This field is not available for all data collections. A value <code>2.09</code> means that 2.09% of pixels in the tile are cloudy.</li>
<li><code>dataPath</code> (string) - Path to where the tile is stored on a cloud. For example <code>"s3://sentinel-s2-l2a/tiles/33/T/VM/2020/9/15/0"</code>.</li>
<li><code>dataGeometry</code> (geojson - like object, see example) - an optional property, added only when requested. Represents a geometry of data coverage within the tile.</li>
<li><code>dataEnvelope</code> (geojson - like object, see example) - an optional property, added only when requested. Represents a bbox of <code>dataGeometry</code>.</li>
<li><code>shId</code> (number) - Sentinel Hub internal identifier of the tile. For example <code>11583048</code>.</li>
</ul></li>
</ul></li>
</ul>
<p><em>NOTE 1: Objects may contain also fields prefixed by <code>__</code> (double underscore). Such fields are used internally by Sentinel Hub services. Evalscripts should not make use of them because they can be changed or removed at any time and <strong>must never</strong> modify or delete such fields. Doing so may cause your request to fail or return incorrect results.</em></p>
<p><em>NOTE 2: In the first implementation, <code>scenes</code> was an array of objects, where each of them contained metadata for one orbit or tile (depending on selected mosaicking). It was possible to access metadata as e.g. <code>scenes[0].date</code>. This approach is now deprecated and we strongly advise to use <code>scenes</code> as described above.</em></p>
</section>
<section id="inputmetadata" class="level4">
<h4 class="anchored" data-anchor-id="inputmetadata">inputMetadata</h4>
<p><code>inputMetadata</code> is an object containing metadata used for processing by Sentinel Hub. Its properties are:</p>
<ul>
<li><code>serviceVersion</code> - the version of Sentinel Hub which was used for processing.</li>
<li><code>normalizationFactor</code> - the factor used by Sentinel Hub to convert digital numbers (DN) to reflectance using <code>REFLECTANCE = DN * normalizationFactor</code>. This is useful when requesting bands for which both <a href="#input-object-properties">units</a> - DN and REFLECTANCE - are supported.</li>
</ul>
</section>
<section id="customdata" class="level4">
<h4 class="anchored" data-anchor-id="customdata">customData</h4>
<p><code>customData</code> is an object reserved for possible future use.</p>
</section>
<section id="outputmetadata" class="level4">
<h4 class="anchored" data-anchor-id="outputmetadata">outputMetadata</h4>
<p><code>outputMetadata</code> is an object which can be used to output any user defined metadata including passing <code>scenes</code> objects, user defined thresholds or ids of original tiles used for processing. It contains:</p>
<ul>
<li><code>userData</code> - is a property to which you can assign a generic object that can contain any data. This can be pushed to the API response by adding a <code>userdata</code> identified output response object to your API request (see <a href="../../../APIs/SentinelHub/ApiReference.html#operation/process">this</a> for details or an example <a href="../../../APIs/SentinelHub/Process/Examples/S2L2A.html#true-color-and-metadata-multi-part-response-geotiff-and-json">here</a>).</li>
</ul>
</section>
</section>
<section id="returns" class="level3">
<h3 class="anchored" data-anchor-id="returns">Returns</h3>
<p>The evaluatePixel function can return:</p>
<ul>
<li>An object whose keys are the <a href="#output-object-properties">output</a> ids and its values are arrays of numbers. The length of the array is bound by the <a href="#output-object-properties">output object</a> bands number and the values by <a href="#sampletype">sampleType</a>.</li>
<li>An array of numbers with the same rules as above. This option can be used only when a single image <a href="#output-object-properties">output</a> is defined.</li>
<li>Nothing; the return statement is not specified. This is useful when only information in <code>outputMetadata.userData</code> is needed.</li>
</ul>
<section id="input-units-and-output-values" class="level4">
<h4 class="anchored" data-anchor-id="input-units-and-output-values">Input Units and Output Values</h4>
<p>The values of each <code>sample</code> is the units specified in the <a href="#input-object-properties">input object</a>. See the input object <a href="#input-object-properties">documentation</a> for more information. How the output values are written to the output raster depends on the <a href="#sampletype">sample type</a>. <code>AUTO</code> will stretch values in the interval [0, 1] to [0, 255] and then write those values into an UINT8 raster. The remaining sample types expect values within the range of the sample format.</p>
</section>
</section>
<section id="examples-1" class="level3">
<h3 class="anchored" data-anchor-id="examples-1">Examples</h3>
<p>Example evaluatePixel script returns a simple True Color image based on bands B04, B03, B02:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(sample) {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [<span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B04</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B03</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B02</span>]<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When we have multiple outputs in the setup function we can provide them as such:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(sample) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">trueColor</span><span class="op">:</span> [<span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B04</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B03</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B02</span>]<span class="op">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">falseColor</span><span class="op">:</span> [<span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B08</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B04</span><span class="op">,</span> <span class="fl">2.5</span> <span class="op">*</span> sample<span class="op">.</span><span class="at">B03</span>]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Calculate the average value of band B04 when using <code>ORBIT</code> or <code>TILE</code> mosaicking:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(samples) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> nonZeroSamples <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> samples<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> samples[i]<span class="op">.</span><span class="at">B04</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (value <span class="op">!=</span> <span class="dv">0</span>) {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      sum <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      nonZeroSamples<span class="op">++;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [sum <span class="op">/</span> nonZeroSamples]<span class="op">;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="updateoutput-function-optional" class="level2">
<h2 class="anchored" data-anchor-id="updateoutput-function-optional">updateOutput function (optional)</h2>
<p>This function can be used to adjust the number of output bands. This is useful, for example, to request all observations in a given time period as bands of an output file. The function is executed after the <code>setup</code> and <code>preProcessScenes</code> functions but before the <code>evaluatePixel</code>.</p>
<section id="parameters-1" class="level3">
<h3 class="anchored" data-anchor-id="parameters-1">Parameters</h3>
<ul>
<li><code>output</code> - an object containing ids of all outputs and their number of bands as specified in the <code>setup</code> function (Note: This is not the same object as <code>output</code> in the <code>setup</code> function.). The number of bands of each output is stored under <code>output.&lt;output id&gt;.bands</code> where <code>&lt;output id&gt;</code> is equal to values in the <code>setup.output</code> object. For example:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"default"</span><span class="op">:</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"bands"</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"my_output"</span><span class="op">:</span> {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"bands"</span><span class="op">:</span> <span class="dv">3</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>collection</code> - an object containing one array per requested data collection. The length of each array equals the number of scenes available for processing. If only one data collection is requested, use <code>collection.scenes.length</code> to get the number of available scenes. For data fusion requests, use <code>collection.&lt;data collection identifier&gt;.scenes.length</code>. Each element in an array has a property:
<ul>
<li><code>date</code> (type Date) - the date when the corresponding scene was acquired.</li>
</ul></li>
</ul>
</section>
<section id="returns-1" class="level3">
<h3 class="anchored" data-anchor-id="returns-1">Returns</h3>
<p>This function updates the number of output bands and does not return anything.</p>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<p>Suppose we request sentinel-2-l1c data from January 2020 with a maximum of 50% cloud coverage. All of this is specified in the body of a request. We would then like to return all available scenes as bands of an output file. Since we generally do not know how many scenes are available, we can not set the number of output bands directly in a <code>setup</code> function. Using the <code>updateOutput</code> function we can get the number of available scenes from <code>collection</code> and assign it as the value of <code>output.&lt;output id&gt;.bands</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">//VERSION=3</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">input</span><span class="op">:</span> [{</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                <span class="dt">bands</span><span class="op">:</span> [<span class="st">"B02"</span>]<span class="op">,</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">output</span><span class="op">:</span> [{</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                <span class="dt">id</span><span class="op">:</span> <span class="st">"my_output"</span><span class="op">,</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                <span class="dt">bands</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                <span class="dt">sampleType</span><span class="op">:</span> SampleType<span class="op">.</span><span class="at">UINT16</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">mosaicking</span><span class="op">:</span> Mosaicking<span class="op">.</span><span class="at">ORBIT</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateOutput</span>(output<span class="op">,</span> collection) {</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    output<span class="op">.</span><span class="at">my_output</span><span class="op">.</span><span class="at">bands</span> <span class="op">=</span> collection<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">length</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">evaluatePixel</span>(samples) {</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> n_scenes <span class="op">=</span> samples<span class="op">.</span><span class="at">length</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> band_b02 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Array</span>(n_scenes)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Arrange values of band B02 in an array</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n_scenes<span class="op">;</span> i<span class="op">++</span>){</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        band_b02[i] <span class="op">=</span> samples[i]<span class="op">.</span><span class="at">B02</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">my_output</span><span class="op">:</span> band_b02</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="updateoutputmetadata-function-optional" class="level2">
<h2 class="anchored" data-anchor-id="updateoutputmetadata-function-optional">updateOutputMetadata function (optional)</h2>
<p>This function is optional and if present is called at the end of evalscript evaluation. It provides a convenient way to forward information pertaining to the returned data as a whole (as opposed to <code>evaluatePixel</code> which is run for each pixel) into an output object. Do this by assigning any object you require to the <code>userData</code> property of the <code>outputMetadata</code> parameter.</p>
<section id="parameters-2" class="level3">
<h3 class="anchored" data-anchor-id="parameters-2">Parameters</h3>
<p>These are the full parameters of the updateOutputMetadata function:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateOutputMetadata</span>(scenes<span class="op">,</span> inputMetadata<span class="op">,</span> outputMetadata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>See description of parameters in the "evaluatePixel function" chapter:</p>
<ul>
<li><code>scenes</code> - <a href="../../../APIs/SentinelHub/Evalscript/V3.html#scenes">scenes</a></li>
<li><code>inputMetadata</code> - <a href="../../../APIs/SentinelHub/Evalscript/V3.html#inputmetadata">inputMetadata</a></li>
<li><code>outputMetadata</code> - <a href="../../../APIs/SentinelHub/Evalscript/V3.html#outputmetadata">outputMetadata</a></li>
</ul>
</section>
</section>
<section id="preprocessscenes-function-optional" class="level2">
<h2 class="anchored" data-anchor-id="preprocessscenes-function-optional">preProcessScenes function (optional)</h2>
<p>This function is optional, and if present is called at the beginning of the script evaluation before the actual satellite data is processed. Use it when <a href="#mosaicking">mosaicking</a> is set to <code>ORBIT</code> or <code>TILE</code>. It provides additional filtering functionality for scenes, after the constraints set in the request parameters are already applied. This is useful, for example, to reduce the number of scenes needed, thereby reducing processing time and the number of processing units for the request.</p>
<section id="parameters-3" class="level3">
<h3 class="anchored" data-anchor-id="parameters-3">Parameters</h3>
<p>These are the full parameters of the <code>preProcessScenes</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span>(collections)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="collections" class="level4">
<h4 class="anchored" data-anchor-id="collections">collections</h4>
<p><code>collections</code> is an object, which contains different properties depending on which mosaicking option is selected.</p>
<ul>
<li><p>If mosaicking is ORBIT, <code>collections</code> contains:</p>
<ul>
<li><code>from</code> (type Date) - the value given as <code>timeRange.from</code> in the body of the request, representing the start of the search interval</li>
<li><code>to</code> (type Date) - the value given as <code>timeRange.to</code> in the body of the request, representing the end of the search interval</li>
<li><code>scenes.orbits</code> - corresponds to <code>scenes.orbits</code> as described for <code>evalautePixel</code> function and mosaicking <code>ORBIT</code> <a href="../../../APIs/SentinelHub/Evalscript/V3.html#scenes">here</a> but it doesn't contain <code>tiles</code>.</li>
</ul></li>
<li><p>If mosaicking is TILE, <code>collections</code> contains:</p>
<ul>
<li><code>scenes.tiles</code> - corresponds to <code>scenes.tiles</code> as described for <code>evalautePixel</code> function and mosaicking <code>TILE</code> <a href="../../../APIs/SentinelHub/Evalscript/V3.html#scenes">here</a>.</li>
</ul></li>
</ul>
</section>
</section>
<section id="returns-2" class="level3">
<h3 class="anchored" data-anchor-id="returns-2">Returns</h3>
<p>The <code>preProcessScenes</code> function must return an objects of the same type as <code>collections</code>. Most often, a sub-set of the input <code>collections</code> will be returned, e.g.&nbsp;to keep only the data acquired before 1.2.2019:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span>(collections){</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (scene) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Date</span>(scene<span class="op">.</span><span class="at">dateFrom</span>) <span class="op">&lt;</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2019-02-01T00:00:00Z"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="examples-2" class="level3">
<h3 class="anchored" data-anchor-id="examples-2">Examples</h3>
<section id="filter-scenes-by-particular-days" class="level4">
<h4 class="anchored" data-anchor-id="filter-scenes-by-particular-days">Filter scenes by particular days</h4>
<p>In this example, we use <code>preProcessScenes</code> function to select images acquired on two particular dates within the requested <code>timeRange</code>. This example was taken (and adopted) from the evalscript for delineation of <a href="https://github.com/sentinel-hub/custom-scripts/blob/11b967f8c8ea10211160e53f43be7fa9b7805c3d/sentinel-2/burned_area/script.js" target="_blank">burned areas</a>, based on the comparison of Sentinel-2 images acquired before (i.e.&nbsp;on "2017-05-15") and after (i.e.&nbsp;on "2017-06-24") the event.</p>
<section id="if-mosaicking-is-orbit" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-orbit">If mosaicking is ORBIT:</h5>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> allowedDates <span class="op">=</span> [<span class="st">"2017-05-15"</span><span class="op">,</span> <span class="st">"2017-06-24"</span>]<span class="op">;</span> <span class="co">//before and after Knysna fires</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (orbit) {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> orbitDateFrom <span class="op">=</span> orbit<span class="op">.</span><span class="at">dateFrom</span><span class="op">.</span><span class="fu">split</span>(<span class="st">"T"</span>)[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> allowedDates<span class="op">.</span><span class="fu">includes</span>(orbitDateFrom)<span class="op">;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="if-mosaicking-is-tile" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-tile">If mosaicking is TILE:</h5>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> allowedDates <span class="op">=</span> [<span class="st">"2017-05-15"</span><span class="op">,</span> <span class="st">"2017-06-24"</span>]<span class="op">;</span> <span class="co">//before and after Knysna fires</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (tile) {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> tileDate <span class="op">=</span> tile<span class="op">.</span><span class="at">date</span><span class="op">.</span><span class="fu">split</span>(<span class="st">"T"</span>)[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> allowedDates<span class="op">.</span><span class="fu">includes</span>(tileDate)<span class="op">;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="filter-scenes-by-time-interval" class="level4">
<h4 class="anchored" data-anchor-id="filter-scenes-by-time-interval">Filter scenes by time interval</h4>
<p>Here, we filter out (= remove) all the scenes acquired between the two selected dates, which both fall within the requested time range.</p>
<section id="if-mosaicking-is-orbit-1" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-orbit-1">If mosaicking is ORBIT:</h5>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (orbit) {</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="kw">new</span> <span class="bu">Date</span>(orbit<span class="op">.</span><span class="at">dateFrom</span>) <span class="op">&lt;</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2019-01-31T00:00:00Z"</span>)) <span class="op">||</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>               (<span class="kw">new</span> <span class="bu">Date</span>(orbit<span class="op">.</span><span class="at">dateFrom</span>) <span class="op">&gt;=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2019-06-01T00:00:00Z"</span>))</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="if-mosaicking-is-tile-1" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-tile-1">If mosaicking is TILE:</h5>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (tile) {</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="kw">new</span> <span class="bu">Date</span>(tile<span class="op">.</span><span class="at">date</span>) <span class="op">&lt;</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2019-01-31T00:00:00Z"</span>)) <span class="op">||</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>               (<span class="kw">new</span> <span class="bu">Date</span>(tile<span class="op">.</span><span class="at">date</span>) <span class="op">&gt;=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2019-06-01T00:00:00Z"</span>))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="specify-the-number-of-months-taken-into-account" class="level4">
<h4 class="anchored" data-anchor-id="specify-the-number-of-months-taken-into-account">Specify the number of months taken into account</h4>
<p>Values of <code>timeRange.from</code> and <code>timeRange.to</code> parameters as given in the request, are available in the <code>preProcessScenes</code> function as <code>collections.to</code> and <code>collections.from</code>, respectively. Mosaicking must be ORBIT to use these parameters. They can be used to e.g.&nbsp;filter out scenes acquired more than 3 months before the given <code>to</code> date and time.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (orbit) {</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> orbitDateFrom <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(orbit<span class="op">.</span><span class="at">dateFrom</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> orbitDateFrom<span class="op">.</span><span class="fu">getTime</span>() <span class="op">&gt;=</span> (collections<span class="op">.</span><span class="at">to</span><span class="op">.</span><span class="fu">getTime</span>()<span class="op">-</span><span class="dv">3</span><span class="op">*</span><span class="dv">31</span><span class="op">*</span><span class="dv">24</span><span class="op">*</span><span class="dv">3600</span><span class="op">*</span><span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>3*31*24*3600*1000</code> represents the 3 months converted to milliseconds. This is needed, so that a 3-month time span can be compared to <code>scene.dateFrom</code> and <code>collections.to</code>, which are all returned as milliseconds since 1970-1-1 by the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime" target="_blank"><code>getTime()</code> function</a>. <em>Note: The result is the same as if the <code>timeRange.from</code> parameter in the body of the request is set to 3 months prior to the <code>timeRange.to</code>.</em></p>
</section>
<section id="select-one-image-per-month" class="level4">
<h4 class="anchored" data-anchor-id="select-one-image-per-month">Select one image per month</h4>
<p>In this example, we filter the available scenes, so that only the first scene acquired in each month is sent to the <code>evaluatePixel</code> function:</p>
<section id="if-mosaicking-is-orbit-2" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-orbit-2">If mosaicking is ORBIT:</h5>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">sort</span>(<span class="kw">function</span> (s1<span class="op">,</span> s2) {</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> date1 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(s1<span class="op">.</span><span class="at">dateFrom</span>)<span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> date2 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(s2<span class="op">.</span><span class="at">dateFrom</span>)<span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> date1 <span class="op">-</span> date2}) <span class="co">// sort the scenes by dateFrom in ascending order</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    firstOrbitDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">dateFrom</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> previousOrbitMonth <span class="op">=</span> firstOrbitDate<span class="op">.</span><span class="fu">getMonth</span>() <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">orbits</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (orbit) {</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> currentOrbitDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(orbit<span class="op">.</span><span class="at">dateFrom</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (currentOrbitDate<span class="op">.</span><span class="fu">getMonth</span>() <span class="op">!=</span> previousOrbitMonth){</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>            previousOrbitMonth <span class="op">=</span> currentOrbitDate<span class="op">.</span><span class="fu">getMonth</span>()<span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="if-mosaicking-is-tile-2" class="level5">
<h5 class="anchored" data-anchor-id="if-mosaicking-is-tile-2">If mosaicking is TILE:</h5>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preProcessScenes</span> (collections) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span><span class="op">.</span><span class="fu">sort</span>(<span class="kw">function</span> (s1<span class="op">,</span> s2) {</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> date1 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(s1<span class="op">.</span><span class="at">date</span>)<span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> date2 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(s2<span class="op">.</span><span class="at">date</span>)<span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> date1 <span class="op">-</span> date2}) <span class="co">// sort the scenes by dateFrom in ascending order</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    firstTileDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">date</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> previousTileMonth <span class="op">=</span> firstTileDate<span class="op">.</span><span class="fu">getMonth</span>() <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span> <span class="op">=</span> collections<span class="op">.</span><span class="at">scenes</span><span class="op">.</span><span class="at">tiles</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (scene) {</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> currentTileDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(scene<span class="op">.</span><span class="at">date</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (currentTileDate<span class="op">.</span><span class="fu">getMonth</span>() <span class="op">!=</span> previousTileMonth){</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            previousTileMonth <span class="op">=</span> currentTileDate<span class="op">.</span><span class="fu">getMonth</span>()<span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collections</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
</section>
<section id="ogc-services-specifics" class="level2">
<h2 class="anchored" data-anchor-id="ogc-services-specifics">OGC services specifics</h2>
<p>There are some specifics when using evalscript V3 with WMS, WTS, WCS services:</p>
<ul>
<li>These services return only the default <a href="#output-object-properties">output</a>. Only one image can be returned with each request and it is not possible to request metadata in JSON format.</li>
<li>TRANSPARENCY and BGCOLOR parameters are ignored. You can use <a href="../../../APIs/SentinelHub/UserGuides/Datamask.html"><code>dataMask</code></a> band in evalscript V3 to handle transparency, as described <a href="../../../APIs/SentinelHub/UserGuides/Transparency.html">here</a>.</li>
<li>Bit depth, which is given as the part of a <code>FORMAT</code> parameter (e.g. <code>FORMAT=image/tiff;depth=8</code>) is ignored. You can use <a href="#sampletype"><code>sampleType</code></a> in evalscript V3 to request the bit depth of your choice.</li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In case <code>samples</code> is an empty array, calling <code>samples[0].B02</code> will raise an error and it is up to users to handle this in their evalscript.<a href="#fnref1" class="footnote-back" role="doc-backlink"></a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../../../APIs/SentinelHub/Evalscript.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Evalscript (custom script)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../APIs/SentinelHub/Evalscript/Functions.html" class="pagination-link">
        <span class="nav-page-text">Utility Functions</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>